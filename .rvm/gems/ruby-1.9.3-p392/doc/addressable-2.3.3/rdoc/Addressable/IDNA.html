<!DOCTYPE html>

<html>
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">

<title>module Addressable::IDNA - addressable-2.3.3 Documentation</title>

<link type="text/css" media="screen" href="../rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "../";
</script>

<script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/navigation.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/search_index.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/search.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/searcher.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/darkfish.js"></script>


<body id="top" class="module">
<nav id="metadata">
  <nav id="home-section" class="section">
  <h3 class="section-header">
    <a href="../index.html">Home</a>
    <a href="../table_of_contents.html#classes">Classes</a>
    <a href="../table_of_contents.html#methods">Methods</a>
  </h3>
</nav>


  <nav id="search-section" class="section project-section" class="initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <h3 class="section-header">
      <input type="text" name="search" placeholder="Search" id="search-field"
             title="Type to search, Up and Down to navigate, Enter to load">
    </h3>
  </form>

  <ul id="search-results" class="initially-hidden"></ul>
</nav>


  <div id="file-metadata">
    <nav id="file-list-section" class="section">
  <h3 class="section-header">Defined In</h3>
  <ul>
    <li>lib/addressable/idna/pure.rb
    <li>lib/addressable/idna/native.rb
  </ul>
</nav>

    
  </div>

  <div id="class-metadata">
    
    
    
    <!-- Method Quickref -->
<nav id="method-list-section" class="section">
  <h3 class="section-header">Methods</h3>

  <ul class="link-list">
    
    <li><a href="#method-c-to_ascii">::to_ascii</a>
    
    <li><a href="#method-c-to_unicode">::to_unicode</a>
    
    <li><a href="#method-c-unicode_normalize_kc">::unicode_normalize_kc</a>
    
  </ul>
</nav>

  </div>

  <div id="project-metadata">
    
    <nav id="classindex-section" class="section project-section">
  <h3 class="section-header">Class and Module Index</h3>

  <ul class="link-list">
  
    <li><a href="../Addressable.html">Addressable</a>
  
    <li><a href="../Addressable/IDNA.html">Addressable::IDNA</a>
  
    <li><a href="../Addressable/IDNA/PunycodeBadInput.html">Addressable::IDNA::PunycodeBadInput</a>
  
    <li><a href="../Addressable/IDNA/PunycodeBigOutput.html">Addressable::IDNA::PunycodeBigOutput</a>
  
    <li><a href="../Addressable/IDNA/PunycodeOverflow.html">Addressable::IDNA::PunycodeOverflow</a>
  
    <li><a href="../Addressable/Template.html">Addressable::Template</a>
  
    <li><a href="../Addressable/Template/InvalidTemplateOperatorError.html">Addressable::Template::InvalidTemplateOperatorError</a>
  
    <li><a href="../Addressable/Template/InvalidTemplateValueError.html">Addressable::Template::InvalidTemplateValueError</a>
  
    <li><a href="../Addressable/Template/MatchData.html">Addressable::Template::MatchData</a>
  
    <li><a href="../Addressable/Template/TemplateOperatorAbortedError.html">Addressable::Template::TemplateOperatorAbortedError</a>
  
    <li><a href="../Addressable/URI.html">Addressable::URI</a>
  
    <li><a href="../Addressable/URI/CharacterClasses.html">Addressable::URI::CharacterClasses</a>
  
    <li><a href="../Addressable/URI/InvalidURIError.html">Addressable::URI::InvalidURIError</a>
  
    <li><a href="../Addressable/VERSION.html">Addressable::VERSION</a>
  
  </ul>
</nav>

  </div>
</nav>

<div id="documentation">
  <h1 class="module">module Addressable::IDNA</h1>

  <div id="description" class="description">
    
  </div><!-- description -->

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    
    <!-- Constants -->
    <section id="constants-list" class="section">
      <h3 class="section-header">Constants</h3>
      <dl>
      
        <dt id="ACE_MAX_LENGTH">ACE_MAX_LENGTH
        
        <dd class="description">
        
      
        <dt id="ACE_PREFIX">ACE_PREFIX
        
        <dd class="description">
        
      
        <dt id="COMPOSITION_TABLE">COMPOSITION_TABLE
        
        <dd class="description">
        
      
        <dt id="HANGUL_LBASE">HANGUL_LBASE
        
        <dd class="description">
        
      
        <dt id="HANGUL_LCOUNT">HANGUL_LCOUNT
        
        <dd class="description">
        
      
        <dt id="HANGUL_NCOUNT">HANGUL_NCOUNT
        
        <dd class="description">
        
      
        <dt id="HANGUL_SBASE">HANGUL_SBASE
        
        <dd class="description">
        
      
        <dt id="HANGUL_SCOUNT">HANGUL_SCOUNT
        
        <dd class="description">
        
      
        <dt id="HANGUL_TBASE">HANGUL_TBASE
        
        <dd class="description">
        
      
        <dt id="HANGUL_TCOUNT">HANGUL_TCOUNT
        
        <dd class="description">
        
      
        <dt id="HANGUL_VBASE">HANGUL_VBASE
        
        <dd class="description">
        
      
        <dt id="HANGUL_VCOUNT">HANGUL_VCOUNT
        
        <dd class="description">
        
      
        <dt id="PUNYCODE_BASE">PUNYCODE_BASE
        
        <dd class="description">
        
      
        <dt id="PUNYCODE_DAMP">PUNYCODE_DAMP
        
        <dd class="description">
        
      
        <dt id="PUNYCODE_DELIMITER">PUNYCODE_DELIMITER
        
        <dd class="description">
        
      
        <dt id="PUNYCODE_INITIAL_BIAS">PUNYCODE_INITIAL_BIAS
        
        <dd class="description">
        
      
        <dt id="PUNYCODE_INITIAL_N">PUNYCODE_INITIAL_N
        
        <dd class="description">
        
      
        <dt id="PUNYCODE_MAXINT">PUNYCODE_MAXINT
        
        <dd class="description">
        
      
        <dt id="PUNYCODE_PRINT_ASCII">PUNYCODE_PRINT_ASCII
        
        <dd class="description">
        
      
        <dt id="PUNYCODE_SKEW">PUNYCODE_SKEW
        
        <dd class="description">
        
      
        <dt id="PUNYCODE_TMAX">PUNYCODE_TMAX
        
        <dd class="description">
        
      
        <dt id="PUNYCODE_TMIN">PUNYCODE_TMIN
        
        <dd class="description">
        
      
        <dt id="UNICODE_DATA">UNICODE_DATA
        
        <dd class="description"><p>This is a sparse Unicode table.  Codepoints without entries are assumed to
have the value: [0, 0, nil, nil, nil, nil, nil]</p>
        
      
        <dt id="UNICODE_DATA_CANONICAL">UNICODE_DATA_CANONICAL
        
        <dd class="description">
        
      
        <dt id="UNICODE_DATA_COMBINING_CLASS">UNICODE_DATA_COMBINING_CLASS
        
        <dd class="description">
        
      
        <dt id="UNICODE_DATA_COMPATIBILITY">UNICODE_DATA_COMPATIBILITY
        
        <dd class="description">
        
      
        <dt id="UNICODE_DATA_EXCLUSION">UNICODE_DATA_EXCLUSION
        
        <dd class="description">
        
      
        <dt id="UNICODE_DATA_LOWERCASE">UNICODE_DATA_LOWERCASE
        
        <dd class="description">
        
      
        <dt id="UNICODE_DATA_TITLECASE">UNICODE_DATA_TITLECASE
        
        <dd class="description">
        
      
        <dt id="UNICODE_DATA_UPPERCASE">UNICODE_DATA_UPPERCASE
        
        <dd class="description">
        
      
        <dt id="UNICODE_MAX_LENGTH">UNICODE_MAX_LENGTH
        
        <dd class="description">
        
      
        <dt id="UNICODE_TABLE">UNICODE_TABLE
        
        <dd class="description"><p>This module is loosely based on idn_actionmailer by Mick Staugaard, the
unicode library by Yoshida Masato, and the punycode implementation by
Kazuhiro Nishiyama.  Most of the code was copied verbatim, but some
reformatting was done, and some translation from C was done.</p>

<p>Without their code to work from as a base, weâ€™d all still be relying on the
presence of libidn.  Which nobody ever seems to have installed.</p>

<p>Original sources: <a
href="http://github.com/staugaard/idn_actionmailer">github.com/staugaard/idn_actionmailer</a>
<a
href="http://www.yoshidam.net/Ruby.html#unicode">www.yoshidam.net/Ruby.html#unicode</a>
<a
href="http://rubyforge.org/frs/?group_id=2550">rubyforge.org/frs/?group_id=2550</a></p>
        
      
        <dt id="UTF8_REGEX">UTF8_REGEX
        
        <dd class="description">
        
      
        <dt id="UTF8_REGEX_MULTIBYTE">UTF8_REGEX_MULTIBYTE
        
        <dd class="description">
        
      
      </dl>
    </section>
    

    

    <!-- Methods -->
    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Public Class Methods</h3>

    
      <div id="method-c-to_ascii" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">to_ascii</span><span
            class="method-args">(input)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Converts from a Unicode internationalized domain name to an ASCII domain
name as described in RFC 3490.</p>
          

          
          <div class="method-source-code" id="to_ascii-source">
            <pre><span class="ruby-comment"># File lib/addressable/idna/pure.rb, line 65</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">to_ascii</span>(<span class="ruby-identifier">input</span>)
  <span class="ruby-identifier">input</span> = <span class="ruby-identifier">input</span>.<span class="ruby-identifier">dup</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">input</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:force_encoding</span>)
    <span class="ruby-identifier">input</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-constant">Encoding</span><span class="ruby-operator">::</span><span class="ruby-constant">ASCII_8BIT</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">input</span> <span class="ruby-operator">=~</span> <span class="ruby-constant">UTF8_REGEX</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">input</span> <span class="ruby-operator">=~</span> <span class="ruby-constant">UTF8_REGEX_MULTIBYTE</span>
    <span class="ruby-identifier">parts</span> = <span class="ruby-identifier">unicode_downcase</span>(<span class="ruby-identifier">input</span>).<span class="ruby-identifier">split</span>(<span class="ruby-string">'.'</span>)
    <span class="ruby-identifier">parts</span>.<span class="ruby-identifier">map!</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">part</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">part</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:force_encoding</span>)
        <span class="ruby-identifier">part</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-constant">Encoding</span><span class="ruby-operator">::</span><span class="ruby-constant">ASCII_8BIT</span>)
      <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">part</span> <span class="ruby-operator">=~</span> <span class="ruby-constant">UTF8_REGEX</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">part</span> <span class="ruby-operator">=~</span> <span class="ruby-constant">UTF8_REGEX_MULTIBYTE</span>
        <span class="ruby-constant">ACE_PREFIX</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">punycode_encode</span>(<span class="ruby-identifier">unicode_normalize_kc</span>(<span class="ruby-identifier">part</span>))
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">part</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">parts</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">'.'</span>)
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">input</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- to_ascii-source -->
          
        </div>

        

        
      </div><!-- to_ascii-method -->

    
      <div id="method-c-to_unicode" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">to_unicode</span><span
            class="method-args">(input)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Converts from an ASCII domain name to a Unicode internationalized domain
name as described in RFC 3490.</p>
          

          
          <div class="method-source-code" id="to_unicode-source">
            <pre><span class="ruby-comment"># File lib/addressable/idna/pure.rb, line 90</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">to_unicode</span>(<span class="ruby-identifier">input</span>)
  <span class="ruby-identifier">parts</span> = <span class="ruby-identifier">input</span>.<span class="ruby-identifier">split</span>(<span class="ruby-string">'.'</span>)
  <span class="ruby-identifier">parts</span>.<span class="ruby-identifier">map!</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">part</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">part</span> <span class="ruby-operator">=~</span> <span class="ruby-node">/^#{ACE_PREFIX}/</span>
      <span class="ruby-identifier">punycode_decode</span>(<span class="ruby-identifier">part</span>[<span class="ruby-node">/^#{ACE_PREFIX}(.+)/</span>, <span class="ruby-value">1</span>])
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">part</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">output</span> = <span class="ruby-identifier">parts</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">'.'</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">output</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:force_encoding</span>)
    <span class="ruby-identifier">output</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-constant">Encoding</span><span class="ruby-operator">::</span><span class="ruby-constant">UTF_8</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">output</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- to_unicode-source -->
          
        </div>

        

        
      </div><!-- to_unicode-method -->

    
      <div id="method-c-unicode_normalize_kc" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">unicode_normalize_kc</span><span
            class="method-args">(input)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Unicode normalization form KC.</p>
          

          
          <div class="method-source-code" id="unicode_normalize_kc-source">
            <pre><span class="ruby-comment"># File lib/addressable/idna/pure.rb, line 107</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">unicode_normalize_kc</span>(<span class="ruby-identifier">input</span>)
  <span class="ruby-identifier">unpacked</span> = <span class="ruby-identifier">input</span>.<span class="ruby-identifier">unpack</span>(<span class="ruby-string">&quot;U*&quot;</span>)
  <span class="ruby-identifier">unpacked</span> =
    <span class="ruby-identifier">unicode_compose</span>(<span class="ruby-identifier">unicode_sort_canonical</span>(<span class="ruby-identifier">unicode_decompose</span>(<span class="ruby-identifier">unpacked</span>)))
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">unpacked</span>.<span class="ruby-identifier">pack</span>(<span class="ruby-string">&quot;U*&quot;</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- unicode_normalize_kc-source -->
          
        </div>

        

        
      </div><!-- unicode_normalize_kc-method -->

    
    </section><!-- public-class-method-details -->
  
  </section><!-- 5Buntitled-5D -->

</div><!-- documentation -->


<footer id="validator-badges">
  <p><a href="http://validator.w3.org/check/referer">[Validate]</a>
  <p>Generated by <a href="https://github.com/rdoc/rdoc">RDoc</a> 3.12.2.
  <p>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish Rdoc Generator</a> 3.
</footer>

